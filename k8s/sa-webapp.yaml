# k8s/sa-webapp.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sa-webapp
  namespace: sa
spec:
  replicas: 1
  selector: { matchLabels: { app: sa-webapp } }
  template:
    metadata: { labels: { app: sa-webapp } }
    spec:
      containers:
        - name: webapp
          image: kaiwenhuang/sa-webapp:v1
          ports: [{ containerPort: 8080 }]
          env:
            # English note:
            # Use service DNS "sa-logic.sa.svc.cluster.local" or simply "sa-logic" inside the same namespace.
            # Change the VAR NAME to what your code actually reads (e.g., SA_LOGIC_URL, LOGIC_BASE_URL, etc.).
            - name: SA_LOGIC_URL
              value: "http://sa-logic:5000"
---
apiVersion: v1
kind: Service
metadata:
  name: sa-webapp
  namespace: sa
spec:
  selector: { app: sa-webapp }
  ports:
    - name: http
      port: 8080
      targetPort: 8080
  type: ClusterIP
